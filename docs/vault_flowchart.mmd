
flowchart TD
    Vault["Vault (encrypted, on-disk)<br>(vault_db.sqlite)"]
    stordb["stordb (working copy, in-memory or local)<br>(stordb_db.sqlite)"]

    stordb -->|CRUD/merge| stordb
    stordb -->|sync| Vault
    Vault -->|sync| stordb
    stordb -.->|direct ops| Vault

    %% Legend
    classDef vaultStyle fill:#f9f,stroke:#333,stroke-width:2px;
    classDef stordbStyle fill:#bbf,stroke:#333,stroke-width:2px;
    class Vault vaultStyle;
    class stordb stordbStyle;
